{% extends 'base.html.twig' %}

{% block title %}Politique de cookies - FootConnect{% endblock %}

{% block body %}
<main class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 md:p-8 mb-6 transition-colors duration-200 hover:shadow-lg">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 border-b border-gray-200 dark:border-gray-700 pb-4 flex items-center">
            <i class="fas fa-cookie-bite text-blue-600 dark:text-blue-400 mr-3"></i>
            Politique de cookies
        </h1>
        
        <div class="prose prose-blue dark:prose-invert max-w-none text-gray-700 dark:text-gray-300">
            <p class="mb-4 leading-relaxed">
                Dernière mise à jour : 7 avril 2025
            </p>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-question-circle text-blue-500 dark:text-blue-400 mr-2"></i>
                Que sont les cookies ?
            </h2>
            <p class="mb-4">
                Les cookies sont de petits fichiers texte qui sont stockés sur votre ordinateur ou votre appareil mobile lorsque vous visitez un site web. Ils permettent au site de mémoriser vos actions et préférences sur une période donnée, afin que vous n'ayez pas à les saisir à chaque fois que vous visitez le site ou naviguez d'une page à une autre.
            </p>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-cogs text-blue-500 dark:text-blue-400 mr-2"></i>
                Comment nous utilisons les cookies
            </h2>
            <p class="mb-4">
                FootConnect utilise des cookies pour diverses raisons, notamment pour :
            </p>
            <ul class="list-disc pl-6 mb-4 space-y-2">
                <li>Assurer le bon fonctionnement du site</li>
                <li>Mémoriser vos préférences (comme le mode sombre)</li>
                <li>Vous permettre de rester connecté à votre compte</li>
                <li>Comprendre comment vous utilisez notre site</li>
                <li>Améliorer votre expérience utilisateur</li>
            </ul>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-tag text-blue-500 dark:text-blue-400 mr-2"></i>
                Types de cookies que nous utilisons
            </h2>
            
            <div class="grid md:grid-cols-3 gap-6 my-8">
                <div class="bg-gray-50 dark:bg-gray-700 p-5 rounded-xl border-l-4 border-green-500 dark:border-green-400">
                    <h3 class="text-lg font-medium mb-2 text-gray-800 dark:text-gray-200 flex items-center">
                        <i class="fas fa-shield-alt text-green-500 mr-2"></i>
                        Cookies essentiels
                    </h3>
                    <p class="text-sm text-gray-700 dark:text-gray-300">
                        Ces cookies sont nécessaires au fonctionnement du site. Sans eux, vous ne pourriez pas naviguer ou utiliser certaines fonctionnalités essentielles.
                    </p>
                </div>
                
                <div class="bg-gray-50 dark:bg-gray-700 p-5 rounded-xl border-l-4 border-blue-500 dark:border-blue-400">
                    <h3 class="text-lg font-medium mb-2 text-gray-800 dark:text-gray-200 flex items-center">
                        <i class="fas fa-sliders-h text-blue-500 mr-2"></i>
                        Cookies de fonctionnalité
                    </h3>
                    <p class="text-sm text-gray-700 dark:text-gray-300">
                        Ces cookies mémorisent vos préférences et personnalisent votre expérience sur notre site.
                    </p>
                </div>
                
                <div class="bg-gray-50 dark:bg-gray-700 p-5 rounded-xl border-l-4 border-purple-500 dark:border-purple-400">
                    <h3 class="text-lg font-medium mb-2 text-gray-800 dark:text-gray-200 flex items-center">
                        <i class="fas fa-chart-bar text-purple-500 mr-2"></i>
                        Cookies analytiques
                    </h3>
                    <p class="text-sm text-gray-700 dark:text-gray-300">
                        Ces cookies collectent des informations anonymes sur votre utilisation du site pour améliorer nos services.
                    </p>
                </div>
            </div>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-sliders-h text-blue-500 dark:text-blue-400 mr-2"></i>
                Gestion des cookies
            </h2>
            <p class="mb-4">
                La plupart des navigateurs web vous permettent de contrôler les cookies via leurs paramètres. Cependant, si vous limitez la capacité des sites web à définir des cookies, cela peut détériorer votre expérience globale sur notre site et limiter certaines fonctionnalités.
            </p>
            
            <div class="bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                <p class="text-blue-800 dark:text-blue-300 text-sm">
                    <i class="fas fa-info-circle mr-2"></i>
                    Vous pouvez paramétrer vos préférences en matière de cookies sur FootConnect en cliquant sur le bouton "Configurer mes préférences" ci-dessous.
                </p>
            </div>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-history text-blue-500 dark:text-blue-400 mr-2"></i>
                Modifications de notre politique de cookies
            </h2>
            <p class="mb-4">
                Nous pouvons mettre à jour cette politique de cookies de temps à autre pour refléter, par exemple, des changements dans les cookies que nous utilisons ou pour d'autres raisons opérationnelles, légales ou réglementaires. Veuillez donc consulter régulièrement cette politique.
            </p>
            
            <h2 class="text-xl font-semibold mb-3 mt-6 text-gray-800 dark:text-gray-200 flex items-center">
                <i class="fas fa-envelope text-blue-500 dark:text-blue-400 mr-2"></i>
                Nous contacter
            </h2>
            <p class="mb-4">
                Si vous avez des questions concernant notre utilisation des cookies, veuillez nous contacter à <a href="mailto:contact@footconnect.com" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">contact@footconnect.com</a>.
            </p>
        </div>
    </div>
    
    <div class="text-center">
        <button id="open-cookie-settings" class="inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 text-white py-3 px-5 rounded-xl mb-4 transition-all duration-200 transform hover:-translate-y-1 hover:shadow-md">
            <i class="fas fa-cog mr-2"></i> Configurer mes préférences de cookies
        </button>
    </div>
    
    <div class="text-center mt-6">
        <a href="{{ path('app_home') }}" class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i> Retour à l'accueil
        </a>
    </div>
</main>

<!-- Modal de configuration des cookies -->
<div id="cookie-preferences-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 opacity-0 pointer-events-none">
    <div class="relative max-w-lg w-full mx-4 bg-white dark:bg-gray-800 rounded-2xl shadow-xl transition-transform transform scale-95 opacity-0 duration-300" id="modal-content">
        <div class="p-6 md:p-8">
            <button type="button" id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center">
                <i class="fas fa-cookie-bite text-blue-600 dark:text-blue-400 mr-3"></i>
                Préférences de cookies
            </h2>
            
            <p class="text-gray-600 dark:text-gray-400 mb-6 text-sm">
                Personnalisez vos préférences en matière de cookies. Les cookies essentiels ne peuvent pas être désactivés car ils sont nécessaires au fonctionnement du site.
            </p>
            
            <div class="space-y-4">
                <!-- Cookies essentiels -->
                <div class="border dark:border-gray-700 rounded-lg p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="essential-cookies" type="checkbox" checked disabled
                                    class="w-5 h-5 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded accent-blue-600 focus:ring-2 focus:ring-blue-500 cursor-not-allowed opacity-60">
                            </div>
                            <div class="ml-3">
                                <label for="essential-cookies" class="block text-sm font-medium text-gray-800 dark:text-gray-200">Cookies essentiels</label>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Toujours actifs - Nécessaires au bon fonctionnement du site</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-xs font-medium text-green-600 dark:text-green-400">Actifs</span>
                        </div>
                    </div>
                </div>
                
                <!-- Cookies fonctionnels -->
                <div class="border dark:border-gray-700 rounded-lg p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="functional-cookies" type="checkbox" checked
                                    class="w-5 h-5 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded accent-blue-600 focus:ring-2 focus:ring-blue-500 cursor-pointer">
                            </div>
                            <div class="ml-3">
                                <label for="functional-cookies" class="block text-sm font-medium text-gray-800 dark:text-gray-200">Cookies de fonctionnalité</label>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Mémorisent vos préférences et personnalisent votre expérience</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Cookies analytiques -->
                <div class="border dark:border-gray-700 rounded-lg p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="analytics-cookies" type="checkbox" checked
                                    class="w-5 h-5 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded accent-blue-600 focus:ring-2 focus:ring-blue-500 cursor-pointer">
                            </div>
                            <div class="ml-3">
                                <label for="analytics-cookies" class="block text-sm font-medium text-gray-800 dark:text-gray-200">Cookies analytiques</label>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Nous aident à améliorer notre site en analysant votre navigation</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex items-center justify-between mt-8 space-x-4">
                <button id="accept-selected" class="flex-1 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors text-sm">
                    Enregistrer mes préférences
                </button>
                <button id="accept-all" class="flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg transition-colors text-sm">
                    Tout accepter
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Gestionnaire modal
        const modal = document.getElementById('cookie-preferences-modal');
        const modalContent = document.getElementById('modal-content');
        const openModalBtn = document.getElementById('open-cookie-settings');
        const closeModalBtn = document.getElementById('close-modal');
        const acceptSelectedBtn = document.getElementById('accept-selected');
        const acceptAllBtn = document.getElementById('accept-all');
        
        // État des cookies
        const cookieState = {
            essential: true,  // Toujours actifs
            functional: localStorage.getItem('cookiePref_functional') !== 'false',
            analytics: localStorage.getItem('cookiePref_analytics') !== 'false'
        };
        
        // Initialisation des états des checkboxes
        document.getElementById('functional-cookies').checked = cookieState.functional;
        document.getElementById('analytics-cookies').checked = cookieState.analytics;
        
        // Ouverture de la modal avec animation
        openModalBtn.addEventListener('click', function() {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        });
        
        // Fermeture de la modal avec animation
        function closeModal() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }
        
        closeModalBtn.addEventListener('click', closeModal);
        
        // Fermeture en cliquant en dehors de la modal
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModal();
            }
        });
        
        // Enregistrer les préférences sélectionnées
        acceptSelectedBtn.addEventListener('click', function() {
            const functionalChecked = document.getElementById('functional-cookies').checked;
            const analyticsChecked = document.getElementById('analytics-cookies').checked;
            
            localStorage.setItem('cookiePref_functional', functionalChecked);
            localStorage.setItem('cookiePref_analytics', analyticsChecked);
            localStorage.setItem('cookieChoice', 'custom');
            
            showSavedBanner();
            closeModal();
        });
        
        // Accepter tous les cookies
        acceptAllBtn.addEventListener('click', function() {
            localStorage.setItem('cookiePref_functional', true);
            localStorage.setItem('cookiePref_analytics', true);
            localStorage.setItem('cookieChoice', 'accepted');
            
            // Mettre à jour les checkboxes pour refléter le choix
            document.getElementById('functional-cookies').checked = true;
            document.getElementById('analytics-cookies').checked = true;
            
            showSavedBanner();
            closeModal();
        });
        
        // Afficher une notification de confirmation
        function showSavedBanner() {
            const banner = document.createElement('div');
            banner.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center z-50';
            banner.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Vos préférences ont été enregistrées';
            document.body.appendChild(banner);
            
            setTimeout(() => {
                banner.style.opacity = '0';
                banner.style.transition = 'opacity 0.5s ease';
                setTimeout(() => banner.remove(), 500);
            }, 3000);
        }
        
        // Fonction publique pour ouvrir la modal des paramètres (utilisable depuis d'autres pages)
        window.showCookieSettings = function() {
            openModalBtn.click();
        };
    });
</script>
{% endblock %}